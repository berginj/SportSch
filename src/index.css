@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --bg: #0b1020;
    --panel: #151c33;
    --card: #111a2d;
    --text: #f5f4ff;
    --muted: rgba(234, 235, 255, 0.68);
    --border: rgba(233, 236, 255, 0.16);
    --accent: #f97316;
    --accent-soft: rgba(249, 115, 22, 0.18);
    --accent-strong: #fb923c;
    --danger: #f43f5e;
    --warn: #f59e0b;
    --ok: #22c55e;
  }

  * { box-sizing: border-box; }
  html, body { height: 100%; }

  body {
    margin: 0;
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    background: radial-gradient(1100px 700px at 8% 0%, rgba(249, 115, 22, 0.18), transparent 60%),
                radial-gradient(900px 600px at 88% 8%, rgba(14, 165, 233, 0.16), transparent 55%),
                radial-gradient(900px 600px at 40% 100%, rgba(244, 63, 94, 0.14), transparent 60%),
                var(--bg);
    color: var(--text);
  }

  a { color: inherit; }
  code {
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    font-size: 0.92em;
  }

  label { @apply block text-xs text-muted mb-1.5; }
  input, select, textarea {
    @apply w-full px-3 py-2.5 rounded-xl border border-border bg-black/20 text-text outline-none;
  }
  textarea { min-height: 90px; resize: vertical; }

  input::placeholder, textarea::placeholder { color: rgba(231, 238, 252, 0.45); }

  button { @apply px-3.5 py-2.5 rounded-[14px] border border-border bg-white/5 text-text cursor-pointer; }
  button:disabled { @apply opacity-60 cursor-not-allowed; }

  /* Mobile touch targets - minimum 44x44px for accessibility */
  @media (max-width: 768px) {
    button,
    .btn,
    a[role="button"] {
      @apply min-h-[44px] px-4 py-3;
    }

    input,
    select,
    textarea {
      @apply min-h-[44px] text-base;
      font-size: 16px; /* Prevent iOS zoom on focus */
    }

    /* Larger tap targets for interactive elements */
    .toast__close,
    .modal__close {
      @apply min-w-[44px] min-h-[44px];
    }
  }
}

@layer components {
  .appShell { @apply min-h-screen max-w-[1200px] mx-auto p-4; }
  .app { @apply min-h-screen; }
  .main { @apply max-w-[1200px] mx-auto p-4; }
  .page { @apply max-w-[1200px] mx-auto p-4 grid gap-4; }

  .container { @apply max-w-[1200px] mx-auto p-4 max-[420px]:p-3; }

  .card {
    @apply rounded-2xl border border-border p-3.5 shadow-card;
    background: linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02));
  }
  .card.error { @apply border-red-400/40 text-red-200; }
  .cardHeader { @apply flex flex-wrap items-center justify-between gap-3 mb-2.5; }
  .cardTitle { @apply text-base font-semibold; }
  .card__header { @apply flex flex-wrap items-center justify-between gap-3 mb-2; }
  .card__body { @apply grid gap-3; }

  .row { @apply flex flex-wrap items-center gap-2; }
  .row--wrap { @apply flex-wrap; }
  .row--between { @apply justify-between; }
  .row--end { @apply justify-end; }
  .grid2 { @apply grid gap-3 min-[900px]:grid-cols-2; }
  .formGrid { @apply grid gap-2.5 grid-cols-[repeat(auto-fit,minmax(240px,1fr))]; }
  .stack { @apply grid gap-3; }
  .filterRow { @apply items-end; }
  .leaguePicker { @apply min-w-[200px]; }

  /* Mobile responsive layouts */
  @media (max-width: 768px) {
    .card {
      @apply p-3 rounded-xl;
    }
    .dataCards,
    .layoutGrid,
    .layoutGrid--two,
    .grid2 {
      @apply grid-cols-1;
    }
    .formGrid {
      @apply grid-cols-1;
    }
    .topNavInner,
    .topnav__inner {
      @apply flex-col items-stretch gap-3 py-3;
    }
    .rightControls,
    .topnav__controls {
      @apply w-full flex-col items-stretch;
    }
    .navPresence {
      @apply min-w-full;
    }
    .control--league,
    .leaguePicker,
    .leagueSelect {
      @apply min-w-full w-full;
    }
    .table {
      @apply text-xs;
    }
    .table th,
    .table td {
      @apply px-2 py-1.5 text-xs;
    }
    .appShell,
    .main {
      @apply px-2;
    }
  }

  .btn {
    @apply inline-flex items-center gap-2 rounded-[10px] border border-border bg-white/5 px-3 py-2 text-sm text-text transition hover:bg-white/10;
  }
  .btn:focus-visible,
  .layoutPill--link:focus-visible,
  .layoutStat--link:focus-visible,
  .layoutItem--link:focus-visible {
    @apply outline-none ring-2 ring-orange-300/60 ring-offset-2 ring-offset-[#0b1020];
  }
  .btn.btn--primary {
    @apply border-orange-300/70 bg-orange-400/20 text-orange-100;
  }
  .btn.btn--danger, .btn.danger { @apply border-rose-400/70 bg-rose-500/20; }
  .btn.btn--ghost { @apply bg-transparent border-white/10; }
  .btn.is-active { @apply border-orange-300/70 text-accent; }

  .tabBtn, .tab {
    @apply inline-flex items-center rounded-full border border-border bg-white/5 px-2.5 py-1.5 text-xs text-text whitespace-nowrap;
  }
  .tabBtn.active, .tab--active {
    @apply border-orange-300/70 bg-orange-400/20 text-orange-100;
  }
  .navTabs, .tabs { @apply flex flex-wrap gap-1.5; }

  .pill { @apply inline-flex items-center gap-1.5 rounded-full border border-border bg-black/20 px-2.5 py-1 text-xs text-muted; }
  .pill.is-active { @apply border-orange-300/70 text-orange-100 bg-orange-400/10; }
  .msg { @apply mt-2.5 rounded-[14px] border border-border bg-black/30 px-3 py-2.5 text-text; }
  .msg.error { @apply border-red-400/40; }
  .msg.ok { @apply border-emerald-400/40; }

  .callout { @apply rounded-xl border border-border bg-black/30 px-3 py-2 text-sm; }
  .callout--error { @apply border-red-400/40 text-red-200; }
  .callout--ok { @apply border-emerald-400/40 text-emerald-200; }

  .statusCard { @apply grid gap-2; }
  .statusCard--error { @apply border-red-400/40 text-red-200; }
  .statusCard__title { @apply text-sm font-semibold; }
  .statusCard__message { @apply text-sm text-muted; }

  .muted { @apply text-muted; }
  .subtle { @apply text-muted text-sm; }
  .ok { @apply text-emerald-300; }
  .err, .error { @apply text-red-300; }

  .h1 { @apply text-2xl font-semibold; }
  .h2 { @apply text-xl font-semibold; }

  .tableWrap { @apply overflow-x-auto; }
  .tableWrap--sticky { @apply max-h-[70vh] overflow-auto; }
  .table { @apply w-full text-sm border-collapse; }
  .table th { @apply text-left text-xs uppercase tracking-wide text-muted border-b border-border py-2 px-3; }
  .table td { @apply border-b border-border py-2 px-3 align-top; }
  .table tr:last-child td { @apply border-b-0; }
  .table--compact th { @apply py-1.5 px-2 text-[11px]; }
  .table--compact td { @apply py-1.5 px-2; }
  .table--compact tbody tr:nth-child(odd) { @apply bg-white/[0.02]; }
  .table--sticky thead th {
    position: sticky;
    top: 0;
    background: rgba(17, 26, 45, 0.92);
    z-index: 1;
  }

  .dataCards { @apply grid gap-3 min-[920px]:grid-cols-2; }
  .dataCard { @apply rounded-2xl border border-border bg-black/20 p-3.5 grid gap-2; }
  .dataCard__title { @apply text-base font-semibold; }
  .dataCard__meta { @apply text-xs text-muted; }
  .dataCard__grid { @apply grid gap-2.5 grid-cols-[repeat(auto-fit,minmax(180px,1fr))]; }

  .slotList { @apply grid gap-3; }
  .slotCard { @apply rounded-2xl border border-border bg-black/20 p-3.5; }
  .slotTop { @apply flex flex-wrap items-start justify-between gap-3; }
  .slotTitle { @apply font-bold; }
  .slotMeta { @apply text-muted text-xs; }
  .actions { @apply flex flex-wrap gap-2.5; }
  .divider { @apply my-3 h-px bg-border; }

  .timelineItem { @apply rounded-2xl border border-border bg-black/20 p-3.5; }
  .timelineItem--event { @apply border-l-4 border-blue-400/80; }
  .timelineItem--slot { @apply border-l-4 border-orange-300/70; }
  .timelineItem--slot.status-open { @apply border-orange-300/90; }
  .timelineItem--slot.status-confirmed { @apply border-emerald-300/90; }
  .timelineItem--slot.status-cancelled { @apply border-red-400/90; }

  .statusBadge { @apply inline-flex items-center rounded-full border border-border bg-black/30 px-2 py-1 text-xs text-muted capitalize; }
  .statusBadge--link { @apply transition hover:border-orange-300/70 hover:text-orange-100; }
  .statusBadge.status-open { @apply text-accent border-orange-300/70; }
  .statusBadge.status-confirmed { @apply text-emerald-300 border-emerald-300/60; }
  .statusBadge.status-cancelled { @apply text-red-300 border-red-300/60; }
  .statusBadge.status-scheduled { @apply text-blue-300 border-blue-300/60; }

  .topNav, .topnav {
    @apply sticky top-0 z-10 border-b border-border backdrop-blur-md;
    background: rgba(10, 16, 30, 0.82);
  }

  .topNavInner, .topnav__inner {
    @apply max-w-[1200px] mx-auto px-3 py-1.5 flex flex-wrap items-center justify-between gap-2;
  }

  .navPresence {
    @apply flex flex-col gap-1 min-w-[140px];
  }
  .navPresence__title {
    @apply text-xs font-semibold tracking-[0.18em] uppercase text-muted;
  }

  .rightControls, .topnav__controls { @apply flex flex-wrap items-center gap-2; }
  .topnav__controls .control { @apply flex flex-col gap-1; }
  .topnav__controls label { @apply text-[9px] uppercase tracking-[0.22em] text-muted; }
  .topnav__controls select { @apply min-w-[150px] text-sm; }
  .topnav__account {
    @apply ml-auto flex items-center gap-2;
  }
  .control--league { @apply min-w-[150px]; }
  .leagueSelect { @apply text-xs py-2 px-2.5; }

  .whoami {
    @apply text-[11px] text-text rounded-full border border-border bg-white/10 px-2.5 py-1;
  }
  .navHint { @apply text-[10px] uppercase tracking-[0.2em] text-muted; }

  .hint { @apply inline-flex items-center justify-center w-4 h-4 rounded-full border border-border text-[11px] text-muted cursor-help; }

  .layoutPreview {
    @apply rounded-[18px] border border-border bg-gradient-to-b from-white/[0.04] to-white/[0.02] p-4;
  }
  .layoutPreview--mobile { @apply max-w-[520px] mx-auto; }
  .layoutPreview--coach .layoutHero,
  .layoutPreview--admin .layoutHeader {
    @apply flex flex-wrap items-center justify-between gap-3 mb-3;
  }

  .layoutPreview--filters .layoutSplit {
    @apply grid gap-3 min-[900px]:grid-cols-[1fr_2fr];
  }

  .layoutTitle { @apply text-lg font-semibold; }
  .layoutMeta { @apply text-muted text-sm; }
  .layoutRow { @apply flex flex-wrap items-center gap-2.5; }
  .layoutRow--space { @apply justify-between; }

  .layoutGrid { @apply grid gap-3 min-[900px]:grid-cols-2; }
  .layoutGrid--two { @apply grid gap-3 min-[900px]:grid-cols-2; }

  .layoutPanel { @apply rounded-xl border border-border bg-black/20 p-3; }
  .layoutPanel__title { @apply mb-2 font-semibold; }
  .layoutList { @apply grid gap-2; }
  .layoutItem { @apply rounded-xl border border-border bg-black/20 p-2.5 text-left; }
  .layoutItem--link { @apply transition hover:border-orange-300/70 hover:bg-black/30; }
  .layoutPill { @apply inline-flex items-center rounded-full border border-border px-2.5 py-1 text-xs text-muted; }
  .layoutPill--link { @apply transition hover:border-orange-300/70 hover:text-orange-100; }
  .layoutBadge { @apply inline-flex items-center rounded-full border border-orange-300/70 px-2 py-1 text-xs text-accent; }
  .layoutBadge--confirm { @apply border-emerald-300/60 text-emerald-300; }
  .layoutBadge--event { @apply border-blue-300/60 text-blue-300; }

  .layoutStatRow { @apply grid gap-2.5 grid-cols-[repeat(auto-fit,minmax(120px,1fr))]; }
  .layoutStat { @apply rounded-xl border border-border bg-black/20 p-2.5; }
  .layoutStat--link { @apply text-left transition hover:border-orange-300/70 hover:bg-black/30; }

  .inlineCheck { @apply inline-flex items-center gap-2 mt-4; }
  .textareaMono { @apply w-full mt-3 font-mono text-sm; }
  .fieldInputShort { @apply w-16; }
  .codeblock { @apply mt-3 rounded-xl border border-border bg-black/30 p-3 text-xs overflow-x-auto font-mono; }

  .modalOverlay {
    @apply fixed inset-0 z-50 flex items-center justify-center bg-black/60 p-4;
  }
  .modal {
    @apply w-full max-w-[520px] rounded-2xl border border-border bg-[#111a2d] p-4 shadow-card;
  }
  .modal__header {
    @apply text-sm font-semibold flex items-center justify-between;
  }
  .modal__close {
    @apply ml-3 text-lg text-muted hover:text-text cursor-pointer border-0 bg-transparent p-1;
  }
  .modal__body { @apply mt-2 text-sm text-muted; }
  .modal__input {
    @apply mt-3 w-full rounded-xl border border-border bg-black/30 px-3 py-2.5 text-sm text-text;
  }
  .modal__actions { @apply mt-4 flex items-center justify-end gap-2; }
  .modal__footer { @apply mt-4 pt-3 border-t border-border; }

  /* Mobile modal improvements */
  @media (max-width: 768px) {
    .modalOverlay {
      @apply p-0;
    }
    .modal {
      @apply min-h-screen rounded-none p-6;
    }
    .modal--shortcuts {
      @apply max-w-full;
    }
  }

  .toast {
    @apply fixed bottom-4 right-4 z-50 rounded-xl border border-border bg-[#111a2d] px-4 py-3 text-sm shadow-card;
    @apply flex items-center gap-3;
    animation: slideIn 0.3s ease-out;
  }
  .toast--info { @apply text-text; }
  .toast--success { @apply border-emerald-400/40 text-emerald-200; }
  .toast--error { @apply border-red-400/40 text-red-200; }
  .toast--warning { @apply border-amber-400/40 text-amber-200; }
  .toast__icon { @apply text-lg; }
  .toast__message { @apply flex-1; }
  .toast__close {
    @apply ml-3 text-xs text-muted hover:text-text cursor-pointer;
  }

  /* Mobile toast positioning */
  @media (max-width: 768px) {
    .toast {
      @apply left-4 right-4 bottom-4;
      width: calc(100% - 2rem);
    }
  }

  .layoutStat__value { @apply text-lg font-semibold; }
  .layoutStat__label { @apply text-xs text-muted; }

  .layoutForm label { @apply mb-2; }

  .layoutPhone { @apply mx-auto max-w-[360px] rounded-[26px] border border-border bg-black/30 p-3; }
  .layoutPhone__bar { @apply mb-2.5 text-center font-semibold; }
  .layoutPhone__section { @apply grid gap-2.5; }
  .layoutPhone__nav { @apply mt-3 grid gap-1.5 grid-cols-4; }

  .calendarSplit { @apply grid gap-3 min-[980px]:grid-cols-[320px_1fr] items-start; }

  /* Skeleton loaders */
  .skeleton {
    @apply bg-white/5 rounded animate-pulse;
  }
  .skeleton--text { @apply h-4 w-full; }
  .skeleton--title { @apply h-6 w-3/4; }
  .skeleton--circle { @apply w-12 h-12 rounded-full; }
  .skeleton-card { @apply rounded-2xl border border-border bg-black/20 p-3.5; }
  .skeleton-table { @apply rounded-2xl border border-border bg-black/20 p-3.5; }

  /* Empty states */
  .empty-state {
    @apply flex flex-col items-center justify-center py-12 px-4 text-center;
  }
  .empty-state__icon { @apply text-5xl mb-4 opacity-40; }
  .empty-state__title { @apply text-lg font-semibold mb-2; }
  .empty-state__message { @apply text-muted max-w-md; }

  /* Error cards */
  .error-card {
    @apply rounded-2xl border border-red-400/40 bg-red-500/5 p-4;
  }
  .error-card__header {
    @apply flex items-center gap-3 mb-3;
  }
  .error-card__icon {
    @apply text-2xl;
  }
  .error-card__title {
    @apply text-base font-semibold text-red-200;
  }
  .error-card__message {
    @apply text-sm text-red-200/90 mb-2;
  }
  .error-card__code {
    @apply text-xs text-red-300/70;
  }
  .error-card__details {
    @apply mt-3;
  }

  /* Button loading state */
  .btn--loading {
    @apply relative;
  }
  .btn__spinner {
    @apply inline-flex items-center justify-center mr-2;
  }
  .btn__spinner-icon {
    @apply w-4 h-4 animate-spin;
  }

  /* Improved focus styles for accessibility */
  .btn:focus-visible,
  .tab:focus-visible,
  input:focus-visible,
  select:focus-visible,
  textarea:focus-visible {
    @apply outline-none ring-2 ring-orange-300/60 ring-offset-2 ring-offset-[#0b1020];
  }

  /* Skip to main content link for accessibility */
  .skip-link {
    @apply absolute left-0 top-0 bg-accent text-white px-4 py-2 rounded-br-xl z-[100];
    transform: translateY(-100%);
  }
  .skip-link:focus {
    transform: translateY(0%);
  }

  /* Tooltip */
  .tooltip-wrapper {
    @apply relative inline-block;
  }
  .tooltip-trigger {
    @apply cursor-help;
  }
  .tooltip {
    @apply absolute z-50 px-3 py-2 text-xs text-text bg-[#111a2d] border border-border rounded-lg shadow-lg;
    @apply whitespace-nowrap pointer-events-none;
    animation: fadeIn 0.2s ease-out;
  }
  .tooltip--top {
    @apply bottom-full left-1/2 -translate-x-1/2 mb-2;
  }
  .tooltip--bottom {
    @apply top-full left-1/2 -translate-x-1/2 mt-2;
  }
  .tooltip--left {
    @apply right-full top-1/2 -translate-y-1/2 mr-2;
  }
  .tooltip--right {
    @apply left-full top-1/2 -translate-y-1/2 ml-2;
  }

  /* Keyboard Shortcuts Modal */
  .modal--shortcuts {
    @apply max-w-2xl;
  }

  .shortcuts-section {
    @apply mb-6 last:mb-0;
  }

  .shortcuts-section__title {
    @apply text-sm font-semibold text-accent uppercase tracking-wide mb-3;
  }

  .shortcuts-list {
    @apply space-y-2;
  }

  .shortcuts-item {
    @apply flex items-center justify-between py-2 px-3 rounded-lg bg-white/5 hover:bg-white/10 transition-colors;
  }

  .shortcuts-keys {
    @apply flex items-center gap-2;
  }

  .shortcuts-description {
    @apply text-sm text-muted;
  }

  .kbd {
    @apply inline-flex items-center justify-center px-2.5 py-1 text-xs font-mono font-semibold;
    @apply text-text bg-white/10 border border-border rounded shadow-sm;
    @apply min-w-[2rem] text-center;
  }

  /* Animations */
  @keyframes slideIn {
    from {
      transform: translateX(100%);
      opacity: 0;
    }
    to {
      transform: translateX(0);
      opacity: 1;
    }
  }

  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }
}
