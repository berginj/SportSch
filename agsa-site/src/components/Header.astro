---
interface NavItem {
  label: string;
  href: string;
}

interface Props {
  siteName: string;
  logoPath: string;
  navItems: NavItem[];
  currentPath: string;
}

const { siteName, logoPath, navItems, currentPath } = Astro.props as Props;
---

<header class="sticky top-0 z-40 border-b border-slate-200 bg-white/95 backdrop-blur">
  <div class="container-shell flex items-center justify-between py-3">
    <a href="/" class="flex items-center gap-3 no-underline">
      <img src={logoPath} alt={`${siteName} logo`} width="36" height="36" loading="eager" />
      <span class="font-display text-2xl font-bold tracking-wide text-brand-secondary">{siteName}</span>
    </a>

    <nav aria-label="Main navigation" class="hidden md:block">
      <ul class="flex flex-wrap items-center gap-2 md:gap-4">
        {
          navItems.map((item) => {
            const active = currentPath === item.href;
            return (
              <li class="list-none">
                <a
                  href={item.href}
                  aria-current={active ? "page" : undefined}
                  class:list={[
                    "rounded-md px-3 py-2 text-sm font-semibold no-underline transition",
                    active ? "bg-brand-mist text-brand-primary" : "text-brand-secondary hover:bg-brand-mist"
                  ]}
                >
                  {item.label}
                </a>
              </li>
            );
          })
        }
      </ul>
    </nav>

    <details class="relative md:hidden">
      <summary class="btn-secondary list-none cursor-pointer">Menu</summary>
      <nav class="absolute right-0 mt-2 w-64 rounded-lg border border-slate-200 bg-white p-2 shadow-card" aria-label="Mobile navigation">
        <ul class="space-y-1">
          {
            navItems.map((item) => {
              const active = currentPath === item.href;
              return (
                <li class="list-none">
                  <a
                    href={item.href}
                    aria-current={active ? "page" : undefined}
                    class:list={[
                      "block rounded-md px-3 py-2 text-sm font-semibold no-underline",
                      active ? "bg-brand-mist text-brand-primary" : "text-brand-secondary hover:bg-brand-mist"
                    ]}
                  >
                    {item.label}
                  </a>
                </li>
              );
            })
          }
        </ul>
      </nav>
    </details>
  </div>
</header>
