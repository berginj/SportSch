---
import BaseLayout from "../layouts/BaseLayout.astro";
import calendarConfig from "../config/calendar.json";
import LastUpdated from "../components/LastUpdated.astro";
---

<BaseLayout title="Schedule" path="/schedule">
  <section class="container-shell py-12">
    <h1 class="font-display text-5xl text-brand-secondary">Schedule</h1>
    <p class="mt-4 max-w-3xl text-slate-600">
      Browse games and events in list or calendar view. Feed mode: <strong>{calendarConfig.mode}</strong>.
    </p>
    <LastUpdated date={calendarConfig.lastUpdated} />
  </section>

  <section class="container-shell pb-6">
    <div class="card p-6">
      <div class="grid gap-4 md:grid-cols-4">
        <label class="text-sm font-semibold text-brand-secondary">
          Division
          <select data-schedule-filter-division class="mt-2 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm">
            <option value="all">All divisions</option>
          </select>
        </label>
        <label class="text-sm font-semibold text-brand-secondary">
          Team
          <select data-schedule-filter-team class="mt-2 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm">
            <option value="all">All teams</option>
          </select>
        </label>
        <label class="text-sm font-semibold text-brand-secondary">
          Location
          <select data-schedule-filter-location class="mt-2 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm">
            <option value="all">All locations</option>
          </select>
        </label>
        <label class="text-sm font-semibold text-brand-secondary">
          Search
          <input data-schedule-search class="mt-2 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm" type="search" placeholder="Team or notes" />
        </label>
      </div>

      <div class="mt-4 flex flex-wrap gap-2">
        <button class="btn-secondary" type="button" data-view-toggle="list">List view</button>
        <button class="btn-secondary" type="button" data-view-toggle="calendar">Calendar view</button>
        <button class="btn-secondary" type="button" data-copy-link>Copy filtered link</button>
        <button class="btn-secondary" type="button" data-download-ics>Add to calendar (ICS)</button>
      </div>

      <p data-schedule-status class="mt-4 text-sm text-slate-600">Loading events...</p>
    </div>
  </section>

  <section class="container-shell pb-12">
    <article class="card p-6" data-view-panel="list">
      <h2 class="font-display text-3xl text-brand-secondary">Upcoming Events</h2>
      <ul data-schedule-list class="mt-5 space-y-3 p-0"></ul>
    </article>

    <article class="card p-6" data-view-panel="calendar" hidden>
      <h2 class="font-display text-3xl text-brand-secondary">Calendar View</h2>
      <div data-calendar-grid class="mt-4 grid grid-cols-2 gap-2 sm:grid-cols-3 lg:grid-cols-7"></div>
    </article>
  </section>

  <script>
    import "../scripts/schedule-page.js";
  </script>
</BaseLayout>
