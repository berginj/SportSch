---
import BaseLayout from "../layouts/BaseLayout.astro";
import LastUpdated from "../components/LastUpdated.astro";
import TierCard from "../components/TierCard.astro";
import OrderSummary from "../components/OrderSummary.astro";
import StepperForm from "../components/StepperForm.astro";
import tiers from "../config/sponsorship-tiers.json";
import settings from "../config/sponsorship-settings.json";
import site from "../config/site.json";

const serializedTiers = JSON.stringify(tiers);
const serializedSettings = JSON.stringify(settings);
---

<BaseLayout title="Sponsor AGSA" path="/sponsor">
  <section class="container-shell py-10">
    <h1 class="font-display text-5xl text-brand-secondary">Sponsor Arlington Girls Softball Association</h1>
    <p class="mt-3 max-w-3xl text-slate-600">
      Choose the right annual package, submit sponsor details, and complete payment online. Every sponsorship is a full 1-year term from payment date.
    </p>
    <div class="mt-4 grid gap-3 rounded-lg border border-brand-primary/20 bg-brand-mist p-4 text-sm text-slate-700 md:grid-cols-2">
      <p class="m-0"><strong>Uniform guarantee deadline:</strong> {settings.deadlineDate}</p>
      <p class="m-0"><strong>Tax status:</strong> {settings.taxLanguage}</p>
      <p class="m-0"><strong>EIN:</strong> {settings.ein}</p>
      <p class="m-0"><strong>Primary social platform:</strong> Instagram (@{settings.instagramHandle})</p>
    </div>
    <LastUpdated date={site.lastUpdated} />
  </section>

  <section class="container-shell pb-12">
    <h2 class="font-display text-3xl text-brand-secondary">Choose Your Annual Sponsorship Tier</h2>
    <p class="mt-2 text-sm text-slate-600">Tier 4 is the only option with jersey logo placement.</p>
    <div class="mt-5 grid gap-4 md:grid-cols-2">
      {tiers.map((tier) => <TierCard tier={tier} />)}
    </div>
  </section>

  <section class="container-shell pb-24 lg:pb-12">
    <div class="grid gap-6 lg:grid-cols-[1fr_360px]">
      <StepperForm tiers={tiers} settings={settings} />
      <OrderSummary settings={settings} />
    </div>
  </section>

  <section class="container-shell pb-12">
    <div class="card p-6">
      <h2 class="font-display text-3xl text-brand-secondary">Why sponsor AGSA?</h2>
      <p class="mt-2 text-sm text-slate-600">
        Sponsorships support scholarships, clinics, equipment, umpires, and uniforms while giving Arlington businesses consistent community visibility.
      </p>
      <ul class="mt-4 list-disc space-y-1 pl-5 text-sm text-slate-700">
        {settings.fundingUses.map((item) => <li>{item}</li>)}
      </ul>
    </div>
  </section>

  <div class="fixed inset-x-0 bottom-0 z-40 border-t border-slate-200 bg-white p-3 shadow-card lg:hidden">
    <div class="container-shell flex items-center justify-between gap-2">
      <div class="text-xs text-slate-600" data-mobile-summary>Choose a tier to see total.</div>
      <button class="btn-primary text-xs" type="button" data-mobile-scroll>Jump to form</button>
    </div>
  </div>

  <script type="application/json" id="sponsor-tiers-data" set:html={serializedTiers}></script>
  <script type="application/json" id="sponsor-settings-data" set:html={serializedSettings}></script>
  <script>
    import "../scripts/sponsor-form.js";
  </script>
</BaseLayout>
