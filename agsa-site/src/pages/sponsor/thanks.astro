---
import BaseLayout from "../../layouts/BaseLayout.astro";
import ConfirmationPanel from "../../components/ConfirmationPanel.astro";
import settings from "../../config/sponsorship-settings.json";
import tiers from "../../config/sponsorship-tiers.json";

const appId = Astro.url.searchParams.get("appId") || "pending";
const tierId = Astro.url.searchParams.get("tierId") || "";
const selectedTier = tiers.find((tier) => tier.id === tierId) || tiers[0];
const logoUploadHref = `/sponsor/upload-logo?appId=${encodeURIComponent(appId)}&tierId=${encodeURIComponent(selectedTier.id)}`;
const note = selectedTier.id === "division-logo"
  ? "Next steps: AGSA will review your logo package and confirm jersey + banner production timelines. Upload logo files now if needed."
  : "Next steps: AGSA will confirm how your sponsor name appears on team pages and jersey name placements.";
---

<BaseLayout title="Sponsor Thank You" path="/sponsor/thanks">
  <section class="container-shell py-12">
    <ConfirmationPanel
      title="Thank you for sponsoring AGSA"
      appId={appId}
      tierName={selectedTier.name}
      benefits={selectedTier.benefits}
      termMonths={settings.sponsorshipTermMonths}
      taxLanguage={settings.taxLanguage}
      ein={settings.ein}
      instagramUrl={settings.instagramUrl}
      instagramHandle={settings.instagramHandle}
      logoUploadCtaHref={selectedTier.id === "division-logo" ? logoUploadHref : undefined}
      note={note}
    />
  </section>
</BaseLayout>
